# AR.IO Bundler Lite - x402 Configuration
# Copy this file to .env and fill in your values
#
# Quick Start:
#   1. cp .env.sample .env
#   2. Set ARWEAVE_WALLET_FILE to absolute path of your wallet
#   3. Set X402_PAYMENT_ADDRESS to your Ethereum address
#   4. Generate ADMIN_PASSWORD: openssl rand -hex 32
#   5. Run: ./start-bundler.sh

#############################################
# Service Configuration
#############################################
NODE_ENV=production
PORT=3001
LOG_LEVEL=info

#############################################
# Database Configuration
#############################################
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_DATABASE=bundler_lite

#############################################
# Redis Configuration
#############################################
# Redis for caching (Elasticache-compatible)
ELASTICACHE_HOST=localhost
ELASTICACHE_PORT=6379
ELASTICACHE_NO_CLUSTERING=true

# Redis for job queues (BullMQ)
REDIS_HOST=localhost
REDIS_PORT_QUEUES=6381

#############################################
# Object Storage (MinIO/S3)
#############################################
AWS_REGION=us-east-1
AWS_ENDPOINT=http://localhost:9000
AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=minioadmin
DATA_ITEM_BUCKET=bundler-data-items
S3_FORCE_PATH_STYLE=true

#############################################
# Arweave Configuration
#############################################
# Gateway for posting bundles to Arweave
ARWEAVE_GATEWAY=https://arweave.net

# Gateway advertised to users for reading their data (shown in info endpoint)
# Set this to your AR.IO gateway if you're running one
PUBLIC_ACCESS_GATEWAY=https://arweave.nexus

# IMPORTANT: Must be an ABSOLUTE path (not relative)
# Example: /home/user/wallets/bundler-wallet.json
ARWEAVE_WALLET_FILE=/absolute/path/to/your/arweave-wallet.json

#############################################
# x402 Payment Configuration
#############################################

# REQUIRED: Your EVM address to receive USDC payments
# Example: 0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb
X402_PAYMENT_ADDRESS=

# Coinbase CDP Credentials (REQUIRED for Base mainnet)
# Get from: https://portal.cdp.coinbase.com/
# Leave empty for testnet (Base Sepolia works without CDP)
CDP_API_KEY_ID=
CDP_API_KEY_SECRET=

# x402 Advanced Settings (optional)
X402_FRAUD_TOLERANCE_PERCENT=5         # Â±5% byte count tolerance
X402_PRICING_BUFFER_PERCENT=15         # 15% price buffer for safety margin
X402_PAYMENT_TIMEOUT_MS=300000         # 5 minutes payment timeout

#############################################
# Info Endpoint Configuration
#############################################
# Ethereum address shown in info endpoint (defaults to X402_PAYMENT_ADDRESS)
# ETHEREUM_ADDRESS=0x...

# Free upload limit in bytes (0 = all uploads require payment)
FREE_UPLOAD_LIMIT=0

#############################################
# Bundling Configuration
#############################################
# Maximum size of a single data item (10 GB default)
MAX_DATA_ITEM_SIZE=10737418240

# Maximum bundle size in bytes (250 MB default)
MAX_BUNDLE_SIZE=250000000

# Bundle metadata tags - added to all bundle transactions on Arweave
APP_NAME=AR.IO Bundler

# Enable optical bridging to AR.IO gateway (requires OPTICAL_BRIDGE_URL)
OPTICAL_BRIDGING_ENABLED=true

#############################################
# Data Cleanup Configuration
#############################################
# How many days to keep filesystem backups before cleanup
# Filesystem backups are used as hot cache during bundling
# After bundling, items are in MinIO + Arweave, so filesystem can be cleaned
FILESYSTEM_CLEANUP_DAYS=7

# How many days to keep MinIO data before cleanup
# MinIO is cold storage for disaster recovery and re-bundling
# After this period, items are only in Arweave (permanent storage)
MINIO_CLEANUP_DAYS=90

#############################################
# Optional: Allow-listed Addresses (Free Uploads)
#############################################
ALLOW_LISTED_ADDRESSES=

#############################################
# Optional: Raw Data Uploads
#############################################
# Enable raw data uploads (for AI agents that can't create ANS-104 data items)
# When enabled, bundler will create and sign data items on behalf of users
# RAW_DATA_UPLOADS_ENABLED=true

# Wallet for signing raw data items (can be same as ARWEAVE_WALLET_FILE or separate)
# IMPORTANT: Must be an ABSOLUTE path (not relative)
# If using Docker and a different wallet than ARWEAVE_WALLET_FILE, ensure it's accessible
# Example: /home/user/wallets/raw-data-wallet.json
# RAW_DATA_ITEM_JWK_FILE=/absolute/path/to/your/raw-data-wallet.json

#############################################
# Optional: AR.IO Gateway Integration
#############################################
# OPTICAL_BRIDGE_URL=http://localhost:4000/ar-io/admin/queue-data-item
# AR_IO_ADMIN_KEY=your-admin-key

#############################################
# Admin Dashboard Configuration
#############################################

# REQUIRED: Admin credentials for dashboard access
ADMIN_USERNAME=admin

# Generate with: openssl rand -hex 32
# The start-bundler.sh script will auto-generate if not set
ADMIN_PASSWORD=

# Dashboard port (default: 3002)
BULL_BOARD_PORT=3002
