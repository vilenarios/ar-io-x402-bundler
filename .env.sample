# AR.IO Bundler Lite - x402 Configuration
# Copy this file to .env and fill in your values
#
# Quick Start:
#   1. cp .env.sample .env
#   2. Set ARWEAVE_WALLET_FILE to absolute path of your wallet
#   3. Set X402_PAYMENT_ADDRESS to your Ethereum address
#   4. Generate ADMIN_PASSWORD: openssl rand -hex 32
#   5. Run: ./start-bundler.sh

#############################################
# Service Configuration
#############################################
NODE_ENV=production
PORT=3001
LOG_LEVEL=info

#############################################
# Database Configuration
#############################################
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_DATABASE=bundler_lite
DB_POOL_MIN=2
DB_POOL_MAX=10

#############################################
# Redis Configuration
#############################################
# Redis for caching (Elasticache-compatible)
ELASTICACHE_HOST=localhost
ELASTICACHE_PORT=6379
ELASTICACHE_NO_CLUSTERING=true

# Redis for job queues (BullMQ)
REDIS_HOST=localhost
REDIS_PORT_QUEUES=6381

#############################################
# Object Storage (MinIO/S3)
#############################################
AWS_REGION=us-east-1
AWS_ENDPOINT=http://localhost:9000
AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=minioadmin
AWS_S3_BUCKET=bundler-data-items
AWS_S3_FORCE_PATH_STYLE=true

#############################################
# Arweave Configuration
#############################################
# Gateway for posting bundles to Arweave
ARWEAVE_GATEWAY=https://arweave.net

# Gateway advertised to users for reading their data (shown in info endpoint)
# Set this to your AR.IO gateway if you're running one
PUBLIC_ACCESS_GATEWAY=https://arweave.nexus

# IMPORTANT: Must be an ABSOLUTE path (not relative)
# Example: /home/user/wallets/bundler-wallet.json
ARWEAVE_WALLET_FILE=/absolute/path/to/your/arweave-wallet.json

#############################################
# x402 Payment Configuration
#############################################

# REQUIRED: Your EVM address to receive USDC payments
# Example: 0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb
X402_PAYMENT_ADDRESS=

# TESTNET (Base Sepolia) - Default, no CDP credentials needed
X402_NETWORKS={"base-sepolia":{"enabled":true,"rpcUrl":"https://sepolia.base.org","usdcAddress":"0x036CbD53842c5426634e7929541eC2318f3dCF7e","facilitatorUrl":"https://x402.org/facilitator"}}

# MAINNET (Base) - Requires CDP credentials below
# X402_NETWORKS={"base":{"enabled":true,"rpcUrl":"https://mainnet.base.org","usdcAddress":"0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913","facilitatorUrl":"https://facilitator.base.coinbasecloud.net"}}

# Coinbase CDP Credentials (REQUIRED for mainnet ONLY)
# Get from: https://portal.cdp.coinbase.com/
# Leave empty for testnet
CDP_API_KEY_ID=
CDP_API_KEY_SECRET=

# x402 Advanced Settings
X402_FRAUD_TOLERANCE_PERCENT=5         # Â±5% byte count tolerance
X402_PRICING_BUFFER_PERCENT=15         # 15% price buffer
X402_PAYMENT_TIMEOUT_MS=300000         # 5 minutes

#############################################
# Bundling Configuration
#############################################
MAX_DATA_ITEM_SIZE=10737418240
BUNDLE_SIZE_LIMIT=250000000
ENABLE_OPTICAL_POSTING=false

#############################################
# Optional: Allow-listed Addresses (Free Uploads)
#############################################
ALLOW_LISTED_ADDRESSES=

#############################################
# Optional: AR.IO Gateway Integration
#############################################
# OPTICAL_BRIDGE_URL=http://localhost:4000/ar-io/admin/queue-data-item
# AR_IO_ADMIN_KEY=your-admin-key

#############################################
# Admin Dashboard Configuration
#############################################

# REQUIRED: Admin credentials for dashboard access
ADMIN_USERNAME=admin

# Generate with: openssl rand -hex 32
# The start-bundler.sh script will auto-generate if not set
ADMIN_PASSWORD=

# Dashboard port (default: 3002)
BULL_BOARD_PORT=3002
